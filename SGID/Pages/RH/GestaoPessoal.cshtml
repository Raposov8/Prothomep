@page
@model SGID.Pages.RH.GestaoPessoalModel
@{
    ViewData["Title"] = "Solicitação de Acesso";
    if (User.IsInRole("Diretoria") && !User.IsInRole("Admin"))
    {
        Layout = "_LayoutDiretoria";
    }
    else
    {
        Layout = "_LayoutNovo";
    }
}

<div class="row">
    <h2 style="padding-left:20px;">Solicitação de Acesso</h2>
</div>

<div class="row">
    <h3 id="Error" class="invisivel" style="padding-left:20px;color:red">Data Evento deve ter 3 dias uteis ou mais</h3>
    <h3 id="Error2" class="invisivel" style="padding-left:20px;color:red">Deve ser informado o Nome  & Cargo do Antigo Colaborador</h3>
</div>

<div class="card" style="padding:10px;">
    @using (@Html.BeginForm(FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="form-group col-md-2">
                        <label>Data Evento</label>
                        <input type="date" class="form-control" id="DataEvento" name="DataEvento" />
                    </div>
                    <div class="form-group col-md-3">
                        <label>Empresa</label>
                        <select class="form-control" id="Empresa" name="Empresa">
                            <option value="Intermedic">Intermedic</option>
                            <option value="Denuo">Denuo</option>
                            <option value="DDental">DDental</option>
                            <option value="IDLog">ID Log</option>
                        </select>
                    </div>
                    <div class="form-group col-md-4">
                        <label>Nome Colaborador</label>
                        <input type="text" class="form-control" id="Nome" name="Nome" />
                    </div>
                    <div class="form-group col-md-3">
                        <label>Tipo</label>
                        <select type="text" class="form-control" id="Tipo" name="Tipo">
                            <option value="Contratação">Contratação</option>
                            <option value="Alteração Cargo">Alteração de Cargo</option>
                            <option value="Desligamento">Desligamento</option>
                            <option value="Ferias">Férias</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-4">
                        <label>Email</label>
                        <input type="text" class="form-control" id="Email" name="Email" />
                    </div>
                    <div class="form-group col-md-4">
                        <label>Cargo</label>
                        <input type="text" class="form-control" id="Cargo" name="Cargo" />
                    </div>
                    <div class="form-group col-md-2">
                        <label>Ramal</label>
                        <input type="text" class="form-control" id="Ramal" name="Ramal"/>
                    </div>
                    <div class="form-group col-md-2">
                        <label>Aumento de Quadro?</label>
                        <select type="text" class="form-control" id="Contratacao" name="Contratacao">
                            <option value="S">SIM</option>
                            <option value="N">NÃO</option>
                        </select>
                    </div>
                </div>
                <div class="row" id="Sub">
                    <div class="form-group col-md-4">
                        <label>Nome Colaborador Subtituido</label>
                        <input type="text" class="form-control" id="NomeSub" name="NomeSub" onkeyup="" />
                    </div>
                    <div class="form-group col-md-4">
                        <label>Cargo Substituido</label>
                        <input type="text" class="form-control" id="CargoSub" name="CargoSub" onkeyup="" />
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <label>Observação</label>
                        <textarea type="text" class="form-control" id="Obs" name="Obs"></textarea>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label">
                    Solicitações
                </label>
                <div class="col-md-10">
                    <input type="checkbox" id="SelectedRoles" name="SelectedRoles" value="Protheus" class="checkbox-inline" />
                    <label class="control-label" for="Protheus">Protheus</label>

                    <input type="checkbox" id="SelectedRoles" name="SelectedRoles" value="Ramal" class="checkbox-inline" />
                    <label class="control-label" for="Ramal">Ramal</label>

                    <input type="checkbox" id="SelectedRoles" name="SelectedRoles" value="Maquina" class="checkbox-inline" />
                    <label class="control-label" for="Maquina">Maquina</label>

                    <input type="checkbox" id="SelectedRoles" name="SelectedRoles" value="Celular" class="checkbox-inline" />
                    <label class="control-label" for="Celular">Celular</label>

                    <input type="checkbox" id="SelectedRoles" name="SelectedRoles" value="Impressora" class="checkbox-inline" />
                    <label class="control-label" for="Impressora">Impressora</label>
                </div>
            </div>
            <div class="row" style="margin-top:10px;">
                <div class="col-md-12">
                    <button class="btn btn-button btn-success float-end" id="Envio" type="submit">Salvar</button>
                </div>
            </div>
        </div>
    }
</div>

@section scripts{
    <script>
        $('#DataEvento').blur(function () 
        {
            var val = $(this).val()

            var data = new Date()


            data.setDate(data.getDate() + 3);

            if(new Date(val) <= data)
            {
                $("#Error").removeClass("invisivel");
                $("#Error").addClass("visivel");
                $(this).val("")
            }
            else
            {
                $("#Error").removeClass("visivel");
                $("#Error").addClass("invisivel");
            }
        })
    </script>

    <script>
        $(document).ready(function () 
        {

            $('#Sub').hide();


            $("#Contratacao").on('change', function () 
            {

                var teste = $("#Contratacao").val();

                if (teste == "N") 
                {
                    $('#Sub').show();
                    $("#Envio").addClass("invisivel");
                }
                else 
                {
                    $('#Sub').hide();
                    $("#Envio").removeClass("invisivel");
                }

            })


            $("#NomeSub").on('change',function (e)
            {

                var Nome = $("#NomeSub").val();

                $("#NomeSub").val(Nome.normalize('NFD').replace(/[^a-zA-Z0-9-\u0300-\u036f\s]/g, '').replace('-', ''));

                if (Nome != undefined) {

                    if (Nome.trim().length === 0) 
                    {
                        $("#Envio").removeClass("visivel");
                        $("#Envio").addClass("invisivel");
                    }
                    else 
                    {
                        var CargoSub = $("#CargoSub").val();

                        if (CargoSub != undefined) 
                        {

                            if (CargoSub.trim().length === 0) 
                            {
                                $("#Envio").removeClass("visivel");
                                $("#Envio").addClass("invisivel");
                            }
                            else
                            {
                                $("#Envio").removeClass("invisivel");
                                $("#Envio").addClass("visivel");
                            }
                        }
                        else
                        {
                            $("#Envio").removeClass("visivel");
                            $("#Envio").addClass("invisivel");
                        }
                        
                    }
                }
                else
                {
                    $("#Envio").removeClass("visivel");
                    $("#Envio").addClass("invisivel");
                }
            })

            $("#CargoSub").on('change', function (e) {

                var CargoSub = $("#CargoSub").val();

                $("#CargoSub").val(CargoSub.normalize('NFD').replace(/[^a-zA-Z0-9-\u0300-\u036f\s]/g, '').replace('-', ''));

                if (CargoSub != undefined) 
                {

                    if (CargoSub.trim().length === 0) 
                    {
                        $("#Envio").removeClass("visivel");
                        $("#Envio").addClass("invisivel");
                    }
                    else 
                    {
                        var Nome = $("#NomeSub").val();

                        if (Nome != undefined) 
                        {

                            if (Nome.trim().length === 0) 
                            {
                                $("#Envio").removeClass("visivel");
                                $("#Envio").addClass("invisivel");
                            }
                            else 
                            {
                                $("#Envio").removeClass("invisivel");
                                $("#Envio").addClass("visivel");
                            }
                        }
                        else 
                        {
                            $("#Envio").removeClass("visivel");
                            $("#Envio").addClass("invisivel");
                        }

                    }
                }
                else 
                {
                    $("#Envio").removeClass("visivel");
                    $("#Envio").addClass("invisivel");
                }
            })
        })

        $(document).ready(function () 
        {
            $(window).keydown(function (event) 
            {
                if (event.keyCode == 13) 
                {
                    event.preventDefault();
                    return false;
                }
            });
        });
    </script>
}
